<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Pepper: Using third-party dependencies</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="pepper.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Pepper
   &#160;<span id="projectnumber">3.1.0</span>
   </div>
   <div id="projectbrief">A highly extensible plattform for conversion and manipulationoflinguisticdata.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dependencies.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Using third-party dependencies </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Compile time</h2>
<p>Third-party dependencies that are available from a public Maven repository are added to the module via Maven's dependency mechanism. Simply add the dependency to your module's <code>pom.xml</code>: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;dependencies&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;  &lt;dependency&gt;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    &lt;version&gt;2.8.2&lt;/version&gt;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;  &lt;/dependency&gt;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;&lt;/dependencies&gt;</div></div><!-- fragment --><p> and - if necessary - also add the repository to your pom </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;repositories&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;  &lt;repository&gt;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    &lt;id&gt;great-public-repo&lt;/id&gt;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    &lt;url&gt;http://server/repo&lt;/url&gt;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;  &lt;/repository&gt;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;&lt;/repositories&gt;</div></div><!-- fragment --><p> Now the 3rd party library is available resolvable for maven and is used to compile the project. But you also need to make it accessible for the Pepper platform during the runtime.</p>
<h2>Runtime</h2>
<p>Since Pepper is build upon the OSGi framework, it is necessary to register the library in OSGi. To do so, there are two ways.</p><ol type="1">
<li>When the 3rd party library is already an OSGi bundle, you can add it to the Pepper plugins folder and run Pepper. The library is started automatically. When you provide your module via a public maven repository and let Pepper install it automatically, Pepper sancs the pom file and will also install such 3rd party libraries</li>
</ol>
<ol type="1">
<li>When the 3rd party library is not already an OSGi bundle, you can let maven package it into your module's jar file. Therefore you need to add the override the maven-bundle-plugin configuration in your pom.xml: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;...</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;&lt;plugin&gt;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        &lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        &lt;version&gt;${maven-bundle-plugin.version}&lt;/version&gt;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        &lt;extensions&gt;true&lt;/extensions&gt;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        &lt;executions&gt;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;                &lt;execution&gt;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;                        &lt;phase&gt;process-classes&lt;/phase&gt;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;                        &lt;goals&gt;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;                                &lt;goal&gt;bundle&lt;/goal&gt;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;                        &lt;/goals&gt;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;                &lt;/execution&gt;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        &lt;/executions&gt;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;        &lt;configuration&gt;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;                &lt;manifestLocation&gt;${META-INF}&lt;/manifestLocation&gt;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;                &lt;source&gt;${java.version}&lt;/source&gt;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;                &lt;target&gt;${java.version}&lt;/target&gt;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;                &lt;instructions&gt;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;                        &lt;Bundle-Name&gt;${project.artifactId}&lt;/Bundle-Name&gt;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;                        &lt;Bundle-SymbolicName&gt;${project.groupId}.${project.artifactId};singleton:=true&lt;/Bundle-SymbolicName&gt;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;                        &lt;Bundle-Version&gt;${project.version}&lt;/Bundle-Version&gt;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;                        &lt;Bundle-RequiredExecutionEnvironment&gt;JavaSE-${java.version}&lt;/Bundle-RequiredExecutionEnvironment&gt;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;                        &lt;Service-Component&gt;${allServiceComponents}&lt;/Service-Component&gt;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;                        &lt;Embed-Dependency&gt;3RD_PARTY_ARTIFACT_ID&lt;/Embed-Dependency&gt;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;                        &lt;Bundle-ClassPath&gt;.,{maven-dependencies} &lt;/Bundle-ClassPath&gt;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;                        &lt;Include-Resource&gt; {maven-resources}, {maven-dependencies},</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;                                LICENSE, NOTICE&lt;/Include-Resource&gt;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;                        &lt;_exportcontents&gt;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;                                3RD_PARTY_ARTIFACT_ID</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;                        &lt;/_exportcontents&gt;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;                &lt;/instructions&gt;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        &lt;/configuration&gt;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;&lt;/plugin&gt;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;...</div></div><!-- fragment --></li>
</ol>
<h3>Using JRebel</h3>
<p>Simply adding the dependencies to <code>pom.xml</code> will, however, <b>not</b> make them automatically available in the local version that you might be testing with the help of JRebel or the way described at <a class="el" href="useEclipse.html">Tutorial: Develop with Eclipse</a>.</p>
<p>In order to be able to use the dependency, go to the command line and copy all dependencies to a specific subfolder: </p><pre class="fragment">mvn dependency:copy-dependencies
</pre><p>Check that your <code>/target</code> folder now has a sub-folder <code>dependency</code>, and that it contains the respective dependency JAR. Now you can simply add this dependency folder to <code>pepper.dropin.paths=</code> in the Pepper properties file, and start using the dependency for debugging. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="moduleDevelopers.html">Pepper module developers</a></li>
    <li class="footer">Generated on Thu Feb 16 2017 21:47:46 for Pepper by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
