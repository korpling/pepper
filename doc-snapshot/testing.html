<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Pepper: Testing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="pepper.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Pepper
   &#160;<span id="projectnumber">3.3.2-SNAPSHOT</span>
   </div>
   <div id="projectbrief">A highly extensible plattform for conversion and manipulationoflinguisticdata.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('testing.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Testing </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Pepper helps you to write test code faster by providing a test suite skeleton (the three classes <a class="el" href="classorg_1_1corpus__tools_1_1pepper_1_1test_framework_1_1_pepper_manipulator_test.html">org.corpus_tools.pepper.testFramework.PepperManipulatorTest</a>, <a class="el" href="classorg_1_1corpus__tools_1_1pepper_1_1test_framework_1_1_pepper_importer_test.html">org.corpus_tools.pepper.testFramework.PepperImporterTest</a> and <a class="el" href="classorg_1_1corpus__tools_1_1pepper_1_1test_framework_1_1_pepper_exporter_test.html">org.corpus_tools.pepper.testFramework.PepperExporterTest</a>). These classes use the JUnit test framework (see: <a href="junit.org">junit.org</a>) and implement some very basic tests for checking the consistency of a Pepper module. Just benefit from these classes by creating an own test class derived from one of them and your tests will be ran during the Maven build cycle. For getting an immediate feedback, you can also run them directly in your development environment by running a JUnit task. On the one hand the test classes provide tests which can be adapted to your needs and check if your module can be plugged into the Pepper framework (by checking if necessary values are set like the supported format for an im- or exporter). And on the other hand, they provide some helper classes and functions, which can be used when adding further test methods for checking the functionality of your module.</p>
<blockquote class="doxtable">
<p><b>Note</b></p>
<p>We strongly recommend to add some module specific test methods, to increase the quality of your code and even to make it easier changing things and still having a correctly running module. </p>
</blockquote>
<p>To set up the tests for the JUnit framework override the method setUp() as shown in the following snippet:</p>
<div class="fragment"><div class="line">@Before</div><div class="line">protected void setUp() throws Exception {</div><div class="line">    //1: setting and initializing of class to test</div><div class="line">    this.setFixture(new MyImporter());</div><div class="line">    //2: adding format information</div><div class="line">    this.supportedFormatsCheck.add(new FormatDesc()</div><div class="line">        .setFormatName(&quot;myFormat&quot;)</div><div class="line">        .setFormatVersion(&quot;1.0&quot;));</div><div class="line">}                </div></div><!-- fragment --><p>Since the JUnit framework can not know about the classes to test, you need to set and initialize it as shown on position 1. In case you are implementing an im- or exporter, you need to set the supported formats and versions in your test case. Pepper will check them automatically, but the test environment needs to know the correct pairs of format name and version. Replace FORMAT_NAME and FORMAT_VERSION with your specific ones. You can even add more than one <a class="el" href="classorg_1_1corpus__tools_1_1pepper_1_1common_1_1_format_desc.html">org.corpus_tools.pepper.common.FormatDesc</a> object.</p>
<p>The provided test classes emulate the Pepper environment, so that you can run your entire module and just check the in- or output.</p>
<p>If you write an importer, you can create an input file containing a corpus in the format you want to support, run your importer and check its output against a predefined template. The test will return a processed Salt model which can be checked for its nodes, relations and so on. The following snippet shows how to read a document and how to check the returned Salt model:</p>
<div class="fragment"><div class="line">    public void someTest(){</div><div class="line">    getFixture().setCorpusDesc(new CorpusDesc().</div><div class="line">        setCorpusPath(URI</div><div class="line">            .createFileURI(PATH_TO_SAMPLE_CORPUS)));</div><div class="line">    getFixture().getCorpusDesc().getFormatDesc()</div><div class="line">        .setFormatName(FORMAT_NAME)</div><div class="line">        .setFormatVersion(FORMAT_VERSION);</div><div class="line">    </div><div class="line">    //...</div><div class="line">    </div><div class="line">    //run your Pepper module</div><div class="line">    start();</div><div class="line">    </div><div class="line">    //checks that the corpus graph object </div><div class="line">    //is not empty any more</div><div class="line">    assertNotNull(getFixture().getSaltProject()</div><div class="line">        .getCorpusGraphs());</div><div class="line">    //checks that the corpus graph contains </div><div class="line">    //X SCorpus objects</div><div class="line">    assertEquals(X, getFixture().getSaltProject()</div><div class="line">        .getCorpusGraphs().get(0).getCorpora().size());</div><div class="line">}</div></div><!-- fragment --><p>If your test does <b>not</b> extend <code>PepperModuleTest</code> or either of its sub-classes, you will also have to add an <code>SCorpusGraph</code> to the module's <code>SaltProject</code>: </p><pre class="fragment">//create an empty corpus graph, which is filled by your module 
SCorpusGraph importedSCorpusGraph= SaltFactory.createSCorpusGraph();
// add the corpus graph to your module
getFixture().getSaltProject().addCorpusGraph(importedSCorpusGraph);
</pre><blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p>develop </p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>More samples for testing can be found in the automatically generated test classes when using Pepper's archetype for Maven, see <a class="el" href="tutorial.html">Tutorial: Getting started in 10 minutes</a>.</p>
<p>For testing an exporter, you may want to use Salt's sample generator (org.corpus_tools.salt.samples.SampleGenerator). Here you will find a lot of methods creating a sample Salt model with the possibility to just create the layers, you want to use. For more information, take a look into <a href="https://korpling.github.io/salt/doc/classorg_1_1corpus__tools_1_1salt_1_1samples_1_1_sample_generator.html">Salt's api</a>.</p>
<p>The class <a class="el" href="classorg_1_1corpus__tools_1_1pepper_1_1test_framework_1_1_pepper_test_util.html">org.corpus_tools.pepper.testFramework.PepperTestUtil</a> provides some very helpful methods like <a class="el" href="classorg_1_1corpus__tools_1_1pepper_1_1test_framework_1_1_pepper_test_util.html#afd42b52230e9b86df7d14628d1ae7efd">org.corpus_tools.pepper.testFramework.PepperTestUtil.getSrcResources()</a> to get a reference to the resources folder (./src/main/resources) or the method getTestResources to get a reference to the test resource folder (./src/test/resources).</p>
<p>When you are implementing an importer and an exporter you may want to make sure that no data is lost, you can orchestrate the im- and the exporter and compare the input files with the output files. In that case implementing the classes <a class="el" href="classorg_1_1corpus__tools_1_1pepper_1_1test_framework_1_1_pepper_importer_test.html">org.corpus_tools.pepper.testFramework.PepperImporterTest</a> and <a class="el" href="classorg_1_1corpus__tools_1_1pepper_1_1test_framework_1_1_pepper_exporter_test.html">org.corpus_tools.pepper.testFramework.PepperExporterTest</a> won't do the job, because they assume that you are testing a single module. To load multiple modules in the Pepper test environment, use the method <a class="el" href="classorg_1_1corpus__tools_1_1pepper_1_1test_framework_1_1_pepper_test_util.html#aebe583c8ed007663725aea903118f0d1">org.corpus_tools.pepper.testFramework.PepperTestUtil.start</a>(Collection&lt;PepperModule&gt; fixtures) instead and pass your im- and your exporter.</p>
<h2>Testing self-tests</h2>
<p>To test whether the self-test is working or not, you can run it as a JUnit test as follows:</p>
<div class="fragment"><div class="line">@Test</div><div class="line">public void whenSelfTestingModule_thenResultShouldBeTrue() {</div><div class="line">        final ModuleFitness fitness = new ModuleFitnessChecker(PepperTestUtil.createDefaultPepper())</div><div class="line">                        .selfTest(getFixture());</div><div class="line">        assertThat(fitness.getFitness(FitnessFeature.HAS_SELFTEST)).isTrue();</div><div class="line">        assertThat(fitness.getFitness(FitnessFeature.HAS_PASSED_SELFTEST)).isTrue();</div><div class="line">        //when module is an importer, you can also test the next feature</div><div class="line">        assertThat(fitness.getFitness(FitnessFeature.IS_IMPORTABLE_SEFTEST_DATA)).isTrue();</div><div class="line">        //when module is an importer or a manipulator, you can also test the next feature</div><div class="line">        assertThat(fitness.getFitness(FitnessFeature.IS_VALID_SELFTEST_DATA)).isTrue();</div><div class="line">}</div></div><!-- fragment --><p> To learn more about the self-test please check selftest </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="module_developers.html">Pepper module developers</a></li>
    <li class="footer">Generated on Mon Feb 11 2019 16:47:01 for Pepper by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>